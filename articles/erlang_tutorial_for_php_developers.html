<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-6947936742546167",
          enable_page_level_ads: true
     });
</script>
  <title>Erlang tutorial for PHP developers</title>
<meta name="Author" content="Marcelo Gornstein"/>
<meta name="Keywords" content=""/>
<meta name="description" content=""/>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../images/favicon.ico" title="favicon" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="all" />
<link href='../dphighlighter/SyntaxHighlighter.css' rel='stylesheet' type='text/css' />
<!--[if IE]>
<link type="text/css" rel="stylesheet" media="screen" href="../css/fix-ie.css" />
<![endif]-->
<!--[if IE 6]>
<script type="text/javascript" src="../js/fix-png.js"></script>
<![endif]-->
<script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>
<script type="text/javascript" src="../js/lib/jquery-core.js"></script>
<script type="text/javascript" src="../js/main.js"></script>
</head>
<body>
<div id="wrapper">
  <div id="top">
    <!-- <a class="logo" href="index.html">Marcelo G</a>-->
    <ul id="nav">
      <li><a href="../index.html"><span>Home</span></a></li>
      <li class="active"><a href="articles.html"><span>Articles</span></a></li>
      <li><a href="../software.html"><span>Software</span></a></li>
      <li><a href="mailto:marcelog@gmail.com"><span>Contact</span></a></li>
    </ul>
  </div>
  <div class="header">
    <div class="line">
      <h1>Articles</h1>
      <div class="social-network">
       <a href="mailto:marcelog@gmail.com" class="icon-email" title="Email">Email</a>
       <g:plusone></g:plusone>
      </div>
     </div>
    <div class="breadcrumb">You are here &nbsp;&raquo;&nbsp; <a href="../index.html">Home Page</a>  &nbsp;&raquo;&nbsp;  <a href="articles.html">Articles</a>  &nbsp;&raquo;&nbsp;  Get your AWS instance tags from your EC2 instance</div>
  </div>
  <div class="main-outer">
    <div class="main-inner">
      <div class="main">
        <div class="line">
          <div id="content">
            <div class="mod simple article-detail-style">
              <span class="top"><span class="tl"></span><span class="tr"></span></span>
              <div class="inner set-height-1">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- blog2 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6947936742546167"
     data-ad-slot="2769853059"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
                <h2>Erlang tutorial for PHP developers</h2>
<a href="https://twitter.com/share" class="twitter-share-button" data-via="mgornstein" data-size="large" data-related="mgornstein">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="hr-1"><hr /></div>
<p>
This article is intended for PHP developers that want to understand and start
learning and coding Erlang applications.
</p>
<p>I'll try to point out the differences between these two distant worlds from a
general perspective first, then slowly dive into the gory details more and more
as we need to.
</p>
<p>
Hopefully, you will be able to continue your journey as an Erlanger from a more
solid base, you should be able to ask the right questions to learn more,
have a global understanding of how Erlang works, and pinpoint your next
learning steps according to what is more interesting for you, so please bear
with me until the end :)
</p>
<h3>What is Erlang and what is OTP?</h3>
<p>
Erlang is a <a href="https://en.wikipedia.org/wiki/Functional_programming">Functional programming language</a>,
designed by <a href="https://en.wikipedia.org/wiki/Ericsson">Ericsson</a>.
</p>
<p>
OTP (Open Telecom Platform) is the <a href="http://erlang.org/doc/apps/erts/index.html">ERTS (Erlang Run-Time System)</a> plus
<a href="http://erlang.org/doc/design_principles/des_princ.html">a set of libraries, reusable components, and design principles</a> for Erlang programs and applications.
</p>
<p>
So when talking about Erlang and/or OTP, we're actually referring to both of them, that
is Erlang/OTP.
</p>
<h3>Programming paradigms of PHP and Erlang</h3>
<p>
One of the biggest differences between both languages is that PHP can be used as an
<a href="https://en.wikipedia.org/wiki/Object-oriented_programming">OOP language</a> and
also for <a href="https://en.wikipedia.org/wiki/Procedural_programming">Procedural programming</a>. PHP
feels closer to how C and Java work (...in some sense).
</p>
<p>
On the other hand, Erlang is a <a href="https://en.wikipedia.org/wiki/Functional_programming">Functional language</a>,
and can be compared (again, in some sense) to how Haskell, LISP, and the like work.
</p>
<h3>Processes and concurrent programming in PHP and Erlang</h3>
<p>
Erlang supports
<a href="erlang.org/doc/getting_started/conc_prog.html">concurrent</a> and
<a href="http://erlang.org/doc/reference_manual/distributed.html">distributed</a> programming, and
implements the <a href="https://en.wikipedia.org/wiki/Actor_model">Actor Model</a>
to provide communication and isolation between processes. This provides the needed tools to write
<a href="https://en.wikipedia.org/wiki/Scalability#Horizontal_and_vertical_scaling">horizontally scalable</a>
applications out of the box.
</p>
<p>
PHP does not have processes, isolation, concurrent or distributed programming, and things like that. The only
way to scale a PHP application is vertically (unless some kind of microservice architecture is used).
</p>
<h3>PHP REPL and the Erlang shell</h3>
<p>
You can invoke the PHP REPL by executing <b>php -a</b>. On the other hand,
<a href="http://erlang.org/doc/man/shell.html">Erlang has a full shell</a> that
provides many utilities to interact with the local (or remote) Erlang nodes. You
can do this by just running <b><a href="http://erlang.org/doc/man/erlc.html">erl</a></b>.
</p>
<p>
<b>Mindblowing part</b>: Whenever you run any of the PHP SAPIs (CGI, CLI, etc) you are calling the
Zend Engine and running the VM that will interpret your code and do whatever
thing your program is supposed to do, it will finish with your code and die. But when you execute the <a href="http://erlang.org/doc/man/erlc.html">erlc</a>
command, you are actually starting an <a href="http://erlang.org/doc/reference_manual/distributed.html#id88382">Erlang node</a>!. Remember:
Erlang will <b>always</b> run a distributed environment, even if that means to be the only node
in a cluster.
</p>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- blog1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6947936742546167"
     data-ad-slot="6142121850"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3>State and behavior in PHP and Erlang</h3>
<p>
In PHP you can encapsulate state in the <a href="https://en.wikipedia.org/wiki/Instance_variable">instance variables</a>
of your objects and behavior in methods.
</p>
<p>In Erlang, state is kept in
<a href="http://erlang.org/doc/reference_manual/processes.html">processes</a>, and behavior
in <a href="http://erlang.org/doc/reference_manual/functions.html">functions</a>
wrapped inside <a href="http://erlang.org/doc/reference_manual/modules.html">modules</a>.
</p>
<h3>PHP and Erlang virtual machines</h3>
<p>
PHP uses the <a href="https://en.wikipedia.org/wiki/Zend_Engine">Zend Engine</a>, and
Erlang uses the <a href="http://www.erlang-factory.com/upload/presentations/708/HitchhikersTouroftheBEAM.pdf">BEAM</a>.
</p>
<p>
The Zend Engine provides a VM with a set of limited features when compared to the
BEAM. The Zend Engine has a single execution thread that can crash (and thus,
crashing your program completely) and only provides the very basic set of features
needed for an OOP language (exceptions, classes, flow control, etc).
</p>
<p>The BEAM looks more like an OS (<a href="http://erlang.org/doc/reference_manual/processes.html">processes</a>, isolation, <a href="http://erlang.org/doc/design_principles/sup_princ.html">supervision trees</a>,
concurrency, scheduling, time control, <a href="http://erlang.org/doc/getting_started/conc_prog.html#id68914">messaging between processes</a>, etc), see this <a href="https://stackoverflow.com/a/16781443/727142">StackOverflow
answer by Robert Virding</a>.
</p>
<p>
Also, when coding in Erlang you get a
<a href="erlang.org/doc/getting_started/conc_prog.html">concurrent</a> and
<a href="http://erlang.org/doc/reference_manual/distributed.html">distributed</a> environment
for free that you can take advantge of :)
</p>
<h3>Coding workflow in Erlang and PHP</h3>
<p>
When writing PHP programs, it's enough to create a file, write some code, and
then run it via the <a href="http://php.net/manual/en/features.commandline.introduction.php">PHP CLI SAPI</a>,
or through a web server like Apache, Nginx, or Lighttpd as a CGI or FastCGI script.
</p>
<p>
In Erlang, after writing your code, you have to compile it first by using
<a href="http://erlang.org/doc/man/erlc.html">erlc</a> or from the
<a href="http://erlang.org/doc/man/shell.html">erlang shell</a> by using the
<a href="http://erlang.org/doc/man/c.html#c-1">c/1, c/2, or c/3 functions</a>.
The compiled code then needs to be "loaded" through <a href="http://erlang.org/doc/man/code.html#load_file-1">code:load_file/1</a> or
when loading your <a href="http://erlang.org/doc/design_principles/applications.html">OTP application</a>.
</p>
<p>
PHP does something similar, actually. When invoking a script (it doesn't matter through wich SAPI),
it will be automatically compiled to <a href="http://php.net/manual/en/internals2.opcodes.php">Zend virtual machine opcodes</a> and
then the VM will run the code. Sometimes that compiled code will be cached to gain speed the next
time it's used.
</p>
<h3>PHP and Erlang applications</h3>
<p>
PHP does not have "applications" per se. You just write your source files and
then somehow run them. There are many frameworks that provide the concept of
"application" (Zend, Laravel, Symfony, Yii, and many more).
</p>
<p>
In Erlang, there are <a href="http://erlang.org/doc/design_principles/des_princ.html#id60511">Erlang/OTP Applications</a>
that can be started/stopped/monitored and maintained as a whole, they encapsulate one or more modules, and
can have several properties (like dependencies, etc).
</p>
<h3>Source file extension for PHP and Erlang</h3>
<p>
PHP files have the .PHP extension (sometimes web applications make use of the
.PHTML extension).
</p>
<p>
Erlang files have the .ERL extension, and .BEAM files are generated by the
compiler after compiling each source file.
</p>
<h3>Source file names in PHP and Erlang</h3>
<p>
In PHP you can choose any file name for your code, and this means that you can
write any number of classes, functions, and standalone code in it.
</p>
<p>Note that you should most likely be following the <a href="http://www.php-fig.org/psr/psr-4/">PSR-4</a>
standard, using specific names and directories for your files depending on the
<a href="http://php.net/manual/en/language.namespaces.php">namespace</a> and
the names of the classes, and things like that.
</p>
<p>
In any case, in Erlang the name of the file must match the module name declared
in it. For example, the following file must be named "sample_module.erl" because it's
declaring a module named "sample_module":
</p>
<script src="https://gist.github.com/marcelog/e9c8c69c3737941ab42a352a6b691def.js"></script>
<h3>Source file structure in PHP and Erlang</h3>
<p>
In PHP there is not much structure in a source file besides using the
<a href="http://php.net/manual/en/language.basic-syntax.phptags.php">PHP tags</a> to
delimit the php code that need to be interpreted.
</p>
<p>
In Erlang, every source file contains <b>only one</b> <a href="http://erlang.org/doc/reference_manual/modules.html">module</a>.
Each module has it's name as the first line, this is followed by the <a href="http://erlang.org/doc/reference_manual/modules.html#id77645">
module attributes</a>, and then the <a href="http://erlang.org/doc/reference_manual/functions.html">function declaration</a> follow. Take a look at
<a href="https://github.com/marcelog/erl_vcron/blob/master/src/erl_vcron.erl">this example erlang module from the erl_vcron project</a>.
</p>
<h3>Code visibility in PHP and Erlang</h3>
<p>
PHP make use of the <a href="http://php.net/manual/en/language.oop5.visibility.php">keywords public, protected, and private</a>. Erlang
by default makes every function in a module private. To make it publicly available, you can use the
<a href="http://erlang.org/doc/reference_manual/modules.html#id77645">export module attribute</a>.
</p>
<h3>Variables in PHP and Erlang</h3>
<p>
In PHP, variables can change their value by using <a href="http://php.net/manual/en/language.operators.assignment.php"><b>"="</b>, called
the assignment operator</a>.
</p>
<p>
In Erlang, <b>=</b> is actually the <a href="http://erlang.org/doc/reference_manual/expressions.html#id80651">Match Operator</a>, this means
that variables will <i>first be tested for equality</i>, and then assigned a value if they are not bound to any, failing if the
value does not match the current bounded one. For example:
</p>
<script src="https://gist.github.com/marcelog/3def06881a97f8bb8d2ec0a101600beb.js"></script>
<p>
In this case there is an unbound variable (i.e: one that is not defined yet) called "X", <b>being tested against</b> the
value "1". Because "X" does not exist yet, it is bound to the value 1, and from then on X can be used. Then, "X" is again trying
to be matched against the value 2, because X now exists but it's bound to the value 1, the match fails and this is
an error that will make your program crash (and that's perfectly fine, too :)).
</p>
<p>
See this <a href="https://stackoverflow.com/questions/38874721/assigning-the-same-value-twice-in-erlang">StackOverflow question about the
pattern matching subject</a>.
</p>
<p>
This is called <a href="http://erlang.org/doc/reference_manual/patterns.html">"pattern matching"</a> and is one of the key components of Erlang, and
one its most powerful features.
</p>
<h3>PHP and Erlang data types</h3>
<p>
PHP has arrays, objects, strings, etc. Erlang has:
<ul>
  <li><b>Atoms</b>: These are similar to <a href="http://rubylearning.com/satishtalim/ruby_symbols.html">Ruby symbols</a>, and
    they are useful to represent constants and keywords in your code. They start with a lowercase letter (or are enclosed in ' if they start with
    an uppercase letter). Variables will always start with an uppercase letter.</li>
  <li><b>Lists</b>: A list of items, similar to an array in PHP, although you can't directly access an item by its
    index in the list out of the box.</li>
  <li><b>Boolean</b>: Boolean values are actually represented by the atoms <b>true</b> and <b>false</b> and they
    are not boolean values per se.</li>
  <li><b>Maps</b>: Analogous to an associative array in PHP.</li>
  <li>Functions: Erlang treat functions as <a href="https://en.wikipedia.org/wiki/First-class_function">first class citizens</a>, this
    means that you can send and receive functions just like any other data type, this is <i>similar</i> to how <a href="http://php.net/manual/en/language.types.callable.php">PHP Callables</a> work.</li>
  <li><b>Tuples</b>: Groups a number (limited, fixed number of) of terms together.</li>
  <li><b>Records</b>: They are implemented as tuples, actually, they have named members and can be
    used to store values like a <a href="https://en.wikipedia.org/wiki/Struct_(C_programming_language)">struct in C</a>.</li>
  <li><b>Binaries</b>: Represent a number of bits.</li>
  <li><b>Pids</b>: A process identifier.</li>
  <li><b>Numbers</b>: Integers and floats.</li>
  <li><b>References</b>: A unique term in the ERTS.</li>
</ul>
</p>
<p>
Here are some examples:
</p>
<script src="https://gist.github.com/marcelog/666916304b97e043eb06e53c0c2042b4.js"></script>
<h3>Your first Erlang module</h3>
<p>
Open your terminal and create a file <b>test.erl</b> with the following code:
</p>
<script src="https://gist.github.com/marcelog/47b0b469faa3a8bbaa17b85115d29488.js"></script>
<p>
Now let's compile it and run it in the erlang shell:
</p>
<script src="https://gist.github.com/marcelog/dd9874ce4969f68e19d6ac60b06fb5a2.js"></script>
<h3>Erlang and PHP project and package managers</h3>
<p>
It's most likely that you're using <a href="https://getcomposer.org/">composer</a> in your PHP
project to handle dependencies and other project-related things.
</p>
<p>
In Erlang, <a href="http://www.rebar3.org/">Rebar</a> is the preferred way to manage
projects and dependencies, closely followed by <a href="https://erlang.mk/">erlang.mk</a>.
</p>
<h3>What's next</h3>
<p>
From now on, you have a very basic but clear idea of what is Erlang/OTP, and its main
differences from PHP and other languages. This is where the real thing starts, and the following
references will help you out in writing code:
<ul>
  <li><a href="http://learnyousomeerlang.com/content">Learn you Some Erlang For Great Good</a></li>
  <li><a href="http://erlang.org/doc/">Official Erlang website</a></li>
  <li><a href="https://gist.github.com/macintux/6349828">Erlang online resources</a></li>
  <li><a href="https://github.com/drobakowski/awesome-erlang">A curated list of awesome Erlang libraries, resources and shiny things</a></li>
</ul>
</p>
              </div>
            </div>
            <div class="mod view-more">
              <div class="inner">
                <a href="articles.html">Read Other Articles</a>
              </div>
              <span class="bottom"><span class="bl"></span><span class="br"></span></span>
            </div>
          </div>
          <div id="sidebar" class="highlight articles-style original">
            <div class="mod simple">
              <span class="top"><span class="tl"></span><span class="tr"></span></span>
              <div class="inner set-height-1">
<p>
If you liked this or other articles (and feel generous), you can make a donation:
</p>
<p>
<a href='https://pledgie.com/campaigns/30947'><img alt='Click here to lend your support to: General and make a donation at pledgie.com !' src='https://pledgie.com/campaigns/30947.png?skin_name=chrome' border='0' ></a>
</p>
                <div class="google-ads">
                    <script type="text/javascript">
                    google_ad_client = "ca-pub-6947936742546167";
                    /* 9 */
                    google_ad_slot = "8617829895";
                    google_ad_width = 250;
                    google_ad_height = 250;
                    //-->
                    </script>
                    <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                    </script>
                </div>
                <h2>Related Articles</h2>
                <div class="hr-1"><hr /></div>
                <ul class="quick-list">
                  <li><a href="erlang_cowboy_php_fastcgi.html">Serve PHP applications with Erlang and Cowboy using FastCGI</a></li>
                  <li><a href="erlang_fastcgi_client.html">Call FastCGI applications from Erlang</a></li>
                  <li><a href="erlang_tutorial_for_php_developers.html">Erlang tutorial for PHP developers</a></li>
                  <li><a href="abnf_grammars_in_elixir.html">ABNF Grammars in Elixir</a></li>
                  <li><a href="erlang_cobertura_coverage_report_from_common_test_jenkins.html">Common Test: Cobertura Coverage report for Jenkins using covertool</a></li>
                  <li><a href="erlang_test_report_in_junit_format_common_test_publish_jenkins.html">Common Test: Generating JUnit style xml reports for Jenkins</a></li>
                  <li><a href="erlang_epers_persist_entities_domain_events.html">Epers, Erlang, and Domain Events when persisting your entities</a></li>
                  <li><a href="erlang_link_vs_monitor_difference.html">Link and Monitor differences</a></li>
                  <li><a href="erlang_persistence_entities.html">Persisting your entities in Erlang</a></li>
                  <li><a href="erlang_rebar_coverage_on_subdirectories.html">Common Test: Code coverage on subdirectories</a></li>
                  <li><a href="erlang_special_processes_tutorial_handling_system_messages.html">Erlang Special Processes without behaviours</a></li>
                  <li><a href="erlang_rebar_generate_code_coverage_eunit_tests.html">How to generate code coverage for eunit tests when using rebar</a></li>
                  <li><a href="erlang_rebar_run_eunit_skip_dependencies.html">How to skip compile and eunit test for dependencies in rebar</a></li>
                </ul>
              </div>
              <span class="bottom"><span class="bl"></span><span class="br"></span></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="footer">
    <!-- <p>&copy; 2010 Marcelo G. All Rights Reserved. Website design by <a href="http://Digitallabs.tv" target="_blank">Digitallabs.tv</a></p> -->
    <address>Email: <a href="mailto:marcelog@gmail.com">marcelog@gmail.com</a></address>
  </div>
</div>

<!-- config SyntaxHighlighter -->
<script src='../dphighlighter/shCore.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushPhp.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushXml.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushJScript.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushCss.js' type='text/javascript'></script>
<script language="javascript">
    dp.SyntaxHighlighter.ClipboardSwf = '../dphighlighter/clipboard.swf';
    dp.SyntaxHighlighter.HighlightAll('code');
</script>
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21070993-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
