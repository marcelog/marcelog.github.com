<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Marcelo G Website</title>
<meta name="Author" content="Digitallabs.tv"/>
<meta name="Keywords" content="Marcelo G Website"/>
<meta name="Description" content="Marcelo G Website"/>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../images/favicon.ico" title="favicon" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="all" />
<link href='../dphighlighter/SyntaxHighlighter.css' rel='stylesheet' type='text/css' />
<!--[if IE]>
<link type="text/css" rel="stylesheet" media="screen" href="css/fix-ie.css" />
<![endif]-->
<!--[if IE 6]>
<script type="text/javascript" src="js/fix-png.js"></script>
<![endif]-->
<script type="text/javascript" src="../js/lib/jquery-core.js"></script>
<script type="text/javascript" src="../js/main.js"></script>
</head>
<body>
<div id="wrapper">
  <div id="top">
    <!-- <a class="logo" href="index.html">Marcelo G</a>-->
    <ul id="nav">
      <li><a href="../index.html"><span>Home</span></a></li>
      <li><a href="../about.html"><span>About</span></a></li>
      <li class="active"><a href="articles.html"><span>Articles</span></a></li>
      <li><a href="../software.html"><span>Software</span></a></li>
      <li><a href="mailto:marcelog@gmail.com"><span>Contact</span></a></li>
    </ul>
  </div>
  <div class="header">
  	<div class="line">
      <h1>Articles</h1>
      <!-- 
      <div class="social-network">
      	<a href="#" class="icon-fb" title="Facebook">Facebook</a>
        <a href="#" class="icon-twitter" title="Twitter">Twitter</a>
        <a href="#" class="icon-email" title="Email">Email</a>
      </div>
       -->
   	</div>
    <div class="breadcrumb">You are here &nbsp;&raquo;&nbsp; <a href="../index.html">Home Page</a>  &nbsp;&raquo;&nbsp;  <a href="articles.html">Articles</a>  &nbsp;&raquo;&nbsp;  Mocking Global Php 5.3 Functions Using Namespaces</div>
  </div>
  <div class="main-outer">
  	<div class="main-inner">
    	<div class="main">
      	<div class="line">
          <div id="content">
            <div class="mod simple article-detail-style">
              <span class="top"><span class="tl"></span><span class="tr"></span></span>
              <div class="inner set-height-1">
                <h2>Mocking Global Php 5.3 Functions Using Namespaces</h2>
                <div class="hr-1"><hr /></div>
                <p>Let’s say you’d like to achieve a 100% <strong>coverage</strong> of your code in your <strong>php application</strong> (you obsessive geek..). It’s almost certain you’ll need to start mock’ing things around. So far so good.. but sooner or later you will need to deal with the test cases for the code that use <strong>global php functions</strong>. How can you mock them? In this article I’ll show you a small technique to allow you to <strong>mock global php functions</strong>. This will require your code to use namespaces, available since <strong>PHP 5.3</strong>.</p>
                <h3>I. Overview of </h3>
                <p>Suppose this is the code you’d like to test, a file called SomeClass.php:</p>
                <pre name="code" class="php">
private db_host = ‘’;
private db_user = ‘’;
private db_pass = ‘’;
private db_name = ‘’; 

// ** Connect function
public function connect()
	{
    if(!$this->con)
    {
      // ** Setup something
      $myconn = @mysql_connect(
      	$this->db_host, $this->db_user, $this->db_pass
      );
      if($myconn)
      {
        $seldb = @mysql_select_db($this->db_name,$myconn);
        if($seldb)
        {
            $this->con = true;
            return true;
        } else
        {
            return false;
        }
      } else
      {
	      return false;
      }
    } else
    {
			return true;
    }
  }</pre>
                <h3>Conclusion</h3>
                <p>With this little trick we can increase the testing level of the code. Most “normal” php code lacks good error handling (differences between cero, false, and null are among the #1’s). Now everything can be tested at the highest levels possible, which is a novelty in the php language :) now go get that 100%!</p>
                <h3>Author</h3>
                <p>Marcelo Gornstein &lt;marcelog@gmail.com&gt;</p>
              </div>
            </div>
            <div class="mod view-more">
              <div class="inner">
                <a href="articles.html">Read Older Articles</a>
              </div>
              <span class="bottom"><span class="bl"></span><span class="br"></span></span>
            </div>
          </div>
          <div id="sidebar" class="highlight articles-style original">
            <div class="mod simple">
              <span class="top"><span class="tl"></span><span class="tr"></span></span>
              <div class="inner set-height-1">
              	<h2>Articles</h2>
                <div class="hr-1"><hr /></div>
                <ul class="quick-list">
                  <li><a href="#">AGI (Asterisk Gateway Interface) Protocol Tutorial And Quick Practical Approach</a></li>
                  <li><a href="#">AMI (Asterisk Manager Interface) Protocol Tutorial</a></li>
                  <li><a href="#">Generating A Cross Compiler For Freebsd In Linux</a></li>
                  <li><a href="#">Mocking Global Php 5.3 Functions Using Namespaces</a></li>
                  <li><a href="#">Using DIME With SOAP And PHP</a></li>
                </ul>
                <div class="google-ads">
                	<img src="../images/google-ads.jpg" width="252" height="252" alt="Google Ads" />
                </div>
              </div>
              <span class="bottom"><span class="bl"></span><span class="br"></span></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="footer">
  	<!-- <p>&copy; 2010 Marcelo G. All Rights Reserved. Website design by <a href="http://Digitallabs.tv" target="_blank">Digitallabs.tv</a></p> -->
    <address>Email: <a href="mailto:marcelog@gmail.com">marcelog@gmail.com</a></address>
  </div>
</div>

<!-- config SyntaxHighlighter -->
<script src='../dphighlighter/shCore.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushPhp.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushXml.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushJScript.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushCss.js' type='text/javascript'></script>
<script language="javascript">
    dp.SyntaxHighlighter.ClipboardSwf = '../dphighlighter/clipboard.swf';
    dp.SyntaxHighlighter.HighlightAll('code');
</script>
</body>
</html>