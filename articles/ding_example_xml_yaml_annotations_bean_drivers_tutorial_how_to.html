<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Ding container: Using the Xml, Yaml, and Annotations drivers</title>
<meta name="Author" content="Marcelo Gornstein"/>
<meta name="Keywords" content="ding di container dependency injection tutorial how to bean provider xml yaml annotation driver example"/>
<meta name="description" content="This article will show how to use the xml yaml and annotations driver to get beans from the container"/>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../images/favicon.ico" title="favicon" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="all" />
<link href='../dphighlighter/SyntaxHighlighter.css' rel='stylesheet' type='text/css' />
<!--[if IE]>
<link type="text/css" rel="stylesheet" media="screen" href="../css/fix-ie.css" />
<![endif]-->
<!--[if IE 6]>
<script type="text/javascript" src="../js/fix-png.js"></script>
<![endif]-->
<script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>
<script type="text/javascript" src="../js/lib/jquery-core.js"></script>
<script type="text/javascript" src="../js/main.js"></script>
</head>
<body>
<div id="wrapper">
  <div id="top">
    <!-- <a class="logo" href="index.html">Marcelo G</a>-->
    <ul id="nav">
      <li><a href="../index.html"><span>Home</span></a></li>
      <li><a href="../about.html"><span>About</span></a></li>
      <li class="active"><a href="articles.html"><span>Articles</span></a></li>
      <li><a href="../software.html"><span>Software</span></a></li>
      <li><a href="mailto:marcelog@gmail.com"><span>Contact</span></a></li>
    </ul>
  </div>
  <div class="header">
  	<div class="line">
      <h1>Articles</h1>
      <div class="social-network">
       <a href="mailto:marcelog@gmail.com" class="icon-email" title="Email">Email</a>
       <g:plusone></g:plusone>
      </div>
   	</div>
    <div class="breadcrumb">You are here &nbsp;&raquo;&nbsp; <a href="../index.html">Home Page</a>  &nbsp;&raquo;&nbsp;  <a href="articles.html">Articles</a>  &nbsp;&raquo;&nbsp;  Ding container: Using the Xml, Yaml, and Annotations drivers</div>
  </div>
  <div class="main-outer">
  	<div class="main-inner">
    	<div class="main">
      	<div class="line">
          <div id="content">
            <div class="mod simple article-detail-style">
              <span class="top"><span class="tl"></span><span class="tr"></span></span>
              <div class="inner set-height-1">
                <h2>Ding container: Using the Xml, Yaml, and Annotations drivers</h2>
                <div class="hr-1"><hr /></div>
<h3>Introduction</h3>
<p>
In a <a href="http://marcelog.github.com/articles/ding_how_to_install_configure_tutorial_introduction.html">previous article</a> I've shown how to download and install
<a href="http://marcelog.github.com/Ding/">the ding container</a>. The article ended with getting a container instance, but didn't show how to actually define and use your
beans. So that's what this article is all about.
</p>
<p>
So ding is basically about beans (aka components). The <a href="http://marcelog.github.com/Ding/manual/toc.html">ding manual</a> contains a little more information about beans and about the whole container. What you will find
here is kind of a "hands-on" approach to it.
</p>
<p>
The idea here is to put your code in your components (beans) following the
<a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a>, and let the container take care of the
rest (like injecting dependencies or maybe even choosing which dependencies to inject and where). So lots of your actual real code will become declarative
stuff, that the container interprets and acts upon. As a result, your code will end up containing only the lines of code that are the true value of the
application. Also, your code will become more testable, because you will no longer need to programatically get your dependencies.
</p>
<p>
So that's how it works: code your components. Then, define (declare) your dependencies to the container. When your components are needed, they will be
injected with any dependencies they might need.
</p>
<H3>Declaring your beans</H3>
<p>
Ding supports 3 bean providers: Xml, Yaml, and Annotations. You can use 1 or all 3 of them, you need at least 1 but you can mix them in any way you need.
The Xml and Yaml files are non code-invasive. In contrast, using annotations is kind of invasive, because you need to actually annotate the code, but they
are a little more agile in the daily developer's work. The most used combination is to have a very short xml or yaml file and the rest using annotations throughout the code.
Let's see an example of a bean declared in the 3 drivers (just a preview), then I'll show how to configure them in the container:
</p>
<pre name="code" class="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans&gt;
  &lt;bean id="myXmlBean" class="MyBean"/&gt;
&lt;/beans&gt;
</pre>
<p>And the equivalent Yaml:</p>
<pre name="code" class="php">
beans:
  myYamlBean:
    class: MyBean
</pre>
<p>
And the equivalent using annotations:
</p>
<pre name="code" class="php">
/**
 * @Component(name="myAnnotatedBean")
 */
class MyBean
{

}
</pre>

<h3>Configuring the 3 drivers</h3>
<p>The drivers are specified in the <a href="http://marcelog.github.com/Ding/manual/toc.html#config">container configuration options</a>:</p>
<pre name="code" class="php">
$options = array('ding' => array(
    'factory' => array(
        'bdef' => array(
            'xml' => array(
                'filename' => array('beans.xml', 'otherbeans.xml'),
                'directories' => array(__DIR__, __DIR__ . '/otherDir')
            ),
            'yaml' => array(
                'filename' => array('beans.yaml', 'otherbeans.yaml'),
                'directories' => array(__DIR__, __DIR__ . '/otherDir')
            ),
            'annotation' => array('scanDir' => array(__DIR__))
        )
    )
));
// Get an instance of the container.
$container = Ding\Container\Impl\ContainerImpl::getInstance($options);
</pre>
<p>
In this case we are configuring all the drivers:
</p>
<ul>
<li><u>xml</u>: We are defining 2 possible names for the bean files, beans.xml and otherbeans.xml. Possible candidates
are the directory where the script is, and the subdirectory "otherDir". So ding will try to find these files in these directories.</li>
<li><u>yaml</u>: Same as xml, but with .yaml files.</li>
<li><u>annotation</u>: We're declaring the directory where the script is as one of the directories to be scanned for annotations.</li>
</ul>
<h3>Enough to get you started</h3>
<p>
To get right into dependency injection, continue with <a href="ding_xml_yaml_di_dependency_injection.html">this article</a>. Also, You can find more about the xml and yaml drivers here:
<ul>
<li><a href="http://marcelog.github.com/Ding/manual/toc.html#ioc">Ding manual</a></li>
<li><a href="https://github.com/marcelog/Ding/tree/master/docs/examples">All ding examples at Github</a>: Including yaml, xml, aspects, setter/constructor injection, using arrays, properties, etc.</li>
</ul>
</p>
              </div>
            </div>
            <div class="mod view-more">
              <div class="inner">
                <a href="articles.html">Read Other Articles</a>
              </div>
              <span class="bottom"><span class="bl"></span><span class="br"></span></span>
            </div>
          </div>
          <div id="sidebar" class="highlight articles-style original">
            <div class="mod simple">
              <span class="top"><span class="tl"></span><span class="tr"></span></span>
              <div class="inner set-height-1">
              	<h2>Articles</h2>
                <div class="hr-1"><hr /></div>
                <ul class="quick-list">
                  <li><a href="erlang_rebar_coverage_on_subdirectories.html">Common Test: Code coverage on subdirectories</a></li>
                  <li><a href="erlang_special_processes_tutorial_handling_system_messages.html">Erlang Special Processes without behaviours</a></li>
                  <li><a href="erlang_websocket_server_cowboy_tutorial.html">Erlang Websocket Server using Cowboy</a></li>
                  <li><a href="making_your_ivr_nodes_call_flow_with_pagi_and_php_asterisk.html">Making your ivr nodes (call) flow with PAGI</a></li>
                  <li><a href="ci_jenkins_hudson_continuous_integration_php_phing.html">PHP Continuous integration, with Jenkins and Phing</a></li>
                  <li><a href="pagi_node_call_flow_easy_telephony_application_for_asterisk_php.html">Advanced telephony applications with PHP and PAGI using call flow nodes</a></li>
                  <li><a href="pagi_mock_client_unit_test_ivr_application_telephony_asterisk_agi.html">Unit test your PHP IVR applications with PAGI</a></li>
                  <li><a href="ding_bean_lifecycle_init_destroy_post_construct.html">Hooks into the bean lifecycle in the Ding container</a></li>
                  <li><a href="swig_php_libpcap_module_c++.html">Sniffing in PHP using libpcap: Thank you SWIG!</a></li>
                  <li><a href="ding_component_bean_annotations_di_dependency_injection.html">Ding annotations for dependency injection</a></li>
                  <li><a href="php_asterisk_agi_protocol_tutorial.html">AGI (Asterisk Gateway Interface) Protocol Tutorial And Quick Practical Approach</a></li>
                  <li><a href="php_asterisk_manager_interface_protocol_tutorial_introduction.html">AMI (Asterisk Manager Interface) Protocol Tutorial</a></li>
                  <li><a href="php_send_dime_attachment_with_soap_webservice_with_curl.html">Using DIME With SOAP And PHP</a></li>
                  <li><a href="cross_freebsd_compiler_in_linux.html">Generating A Cross Compiler For Freebsd In Linux</a></li>
                  <li><a href="ding_php_aop_aspect_oriented_programming.html">Aspect Oriented Programming in PHP with Ding</a></li>
                  <li><a href="php_mock_global_functions_for_unit_tests_with_phpunit.html">Mocking Global Php 5.3 Functions Using Namespaces</a></li>
                  <li><a href="php_asterisk_listener_example_using_pami_and_ding.html">Making an Asterisk Manager Interface monitor using PHP, PAMI, and Ding (Inversion of control and dependency injection in your php telephony applications)</a></li>
                  <li><a href="bash_asterisk_manager_interface_client_shell_script.html">Bami: A Proof of concept asterisk manager interface (AMI) client written in bash</a></li>
                  <li><a href="configure_nginx_php_5.3_5.2_fastcgi.html">How to setup nginx to work with FastCGI and PHP 5.2 and PHP 5.3</a></li>
                  <li><a href="creating_php_cli_standalone_portable_applications_with_pear_dependencies.html"> Creating isolated environments for PHP applications with PEAR dependencies</a></li>
                  <li><a href="php_applications_with_doctrine2_orm_and_ding_di_container.html">Writing PHP applications with Doctrine2 as ORM and Ding as DI container</a></li>
                  <li><a href="configure_postfix_forward_all_email_smtp_gateway.html">Configuring postfix to forward all email to a smtp gateway</a></li>
                  <li><a href="ding_how_to_install_configure_tutorial_introduction.html">Installing and using the Ding DI Container</a></li>
                  <li><a href="pami_introduction_tutorial_how_to_install.html">Getting Started with the PAMI: PHP Asterisk Manager Interface</a></li>
                  <li><a href="pagi_tutorial_create_voip_telephony_application_for_asterisk_with_agi_and_php.html">PAGI: Quick telephony applications using AGI and PHP</a></li>
                  <li><a href="ding_xml_yaml_di_dependency_injection.html">Dependency injection with Xml and Yaml in the Ding container</a></li>
                  <li><a href="configure_postfix_forward_email_regex_subject_transport_relay.html">Different relays in postfix based on regular expressions</a></li>
                </ul>
                <div class="google-ads">
                    <script type="text/javascript">
                    google_ad_client = "ca-pub-6947936742546167";
                    /* 9 */
                    google_ad_slot = "8617829895";
                    google_ad_width = 250;
                    google_ad_height = 250;
                    //-->
                    </script>
                    <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                    </script>
                </div>
              </div>
              <span class="bottom"><span class="bl"></span><span class="br"></span></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="footer">
  	<!-- <p>&copy; 2010 Marcelo G. All Rights Reserved. Website design by <a href="http://Digitallabs.tv" target="_blank">Digitallabs.tv</a></p> -->
    <address>Email: <a href="mailto:marcelog@gmail.com">marcelog@gmail.com</a></address>
  </div>
</div>

<!-- config SyntaxHighlighter -->
<script src='../dphighlighter/shCore.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushPhp.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushXml.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushJScript.js' type='text/javascript'></script>
<script src='../dphighlighter/shBrushCss.js' type='text/javascript'></script>
<script language="javascript">
    dp.SyntaxHighlighter.ClipboardSwf = '../dphighlighter/clipboard.swf';
    dp.SyntaxHighlighter.HighlightAll('code');
</script>
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21070993-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
